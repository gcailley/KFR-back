CREATE TABLE rtlq_adherent (id INT AUTO_INCREMENT NOT NULL, cotisation_id INT DEFAULT NULL, username VARCHAR(25) NOT NULL, email VARCHAR(100) NOT NULL, password VARCHAR(64) NOT NULL, telephone VARCHAR(20) NOT NULL, nom VARCHAR(100) NOT
NULL, prenom VARCHAR(100) NOT NULL, date_naissance DATE NOT NULL, actif TINYINT(1) NOT NULL, public TINYINT(1) NOT NULL, adresse VARCHAR(100) NOT NULL, avatar LONGBLOB DEFAULT NULL, codePostal VARCHAR(5) NOT NULL, ville VARCHAR(100) NOT NULL, date_creation DATE NOT NULL, date_last_auth DATE DEFAULT NULL, licence_number VARCHAR(100) DEFAULT NULL, licence_etat VARCHAR(100) DEFAULT NULL, UNIQUE INDEX UNIQ_E9CF7E31F85E0677 (username), INDEX IDX_E9CF7E313EAA84B1 (cotisation_id), INDEX id (id), UNIQUE INDEX email (email), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci
ENGINE = InnoDB;
CREATE TABLE rtlq_association (id INT AUTO_INCREMENT NOT NULL, nom VARCHAR(100) NOT NULL, date_creation DATE NOT NULL, active TINYINT(1) NOT NULL, siege_social VARCHAR(100) NOT NULL, email VARCHAR(100) NOT NULL, INDEX id (id), UNIQUE INDEX nom (nom), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
CREATE TABLE rtlq_groupe (id INT AUTO_INCREMENT NOT NULL, nom VARCHAR(100) NOT NULL, role VARCHAR(20) NOT NULL, INDEX
id (id), UNIQUE INDEX nom (nom), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
CREATE TABLE rtlq_adherents_groupes (groupe_id INT NOT NULL, adherent_id INT NOT NULL, INDEX IDX_E2A041687A45358C (groupe_id), INDEX IDX_E2A0416825F06C53 (adherent_id), PRIMARY KEY(groupe_id, adherent_id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
CREATE TABLE rtlq_news (id INT AUTO_INCREMENT NOT NULL, title VARCHAR(100) NOT NULL, description VARCHAR(1000) NOT NULL, actif TINYINT(1) NOT NULL, date_creation DATE NOT NULL, link VARCHAR(1000) DEFAULT NULL, PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
CREATE TABLE rtlq_photo (id INT AUTO_INCREMENT NOT NULL, repertoire_id INT NOT NULL, title VARCHAR(100) NOT NULL, description VARCHAR(1000) NOT NULL, source_base64 LONGBLOB DEFAULT NULL, source_mime_type VARCHAR(20) DEFAULT NULL, source_file_size VARCHAR(20) DEFAULT NULL, thumbnail_base64 LONGBLOB DEFAULT NULL, thumbnail_mime_type VARCHAR(20) DEFAULT NULL, thumbnail_file_size VARCHAR(20) DEFAULT NULL, INDEX IDX_5E6F08461E61B789 (repertoire_id), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
CREATE TABLE rtlq_photo_directories (id INT AUTO_INCREMENT NOT NULL, name VARCHAR(1000) DEFAULT NULL, PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
CREATE TABLE rtlq_cotisation (id INT AUTO_INCREMENT NOT NULL, saison_id INT NOT NULL, categorie_id INT NOT NULL, description VARCHAR(100) NOT NULL, cotisation INT NOT NULL, repartition_cheque VARCHAR(15) NOT NULL, active TINYINT(1) NOT
NULL, INDEX IDX_7C469C3F965414C (saison_id), INDEX IDX_7C469C3BCF5E72D (categorie_id), INDEX id (id), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
CREATE TABLE rtlq_kungfu_niveau (id INT AUTO_INCREMENT NOT NULL, value VARCHAR(100) NOT NULL, INDEX id (id), UNIQUE INDEX Value (Value), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
CREATE TABLE rtlq_kungfu_style (id INT AUTO_INCREMENT NOT NULL, value VARCHAR(100) NOT NULL, INDEX id (id), UNIQUE INDEX Value (Value), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
CREATE TABLE rtlq_tao (id INT AUTO_INCREMENT NOT NULL, style_id INT NOT NULL, niveau_id INT NOT NULL, nom VARCHAR(100) NOT NULL, nom_chinois VARCHAR(100) NOT NULL, description VARCHAR(100) NOT NULL, arme VARCHAR(100) DEFAULT NULL, arme_url VARCHAR(100) NOT NULL, video_url VARCHAR(100) NOT NULL, actif VARCHAR(100) NOT NULL, INDEX IDX_498942B5BACD6074 (style_id), INDEX IDX_498942B5B3E9C81 (niveau_id), INDEX id (id), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
CREATE TABLE rtlq_saison (id INT AUTO_INCREMENT NOT NULL, nom VARCHAR(100) NOT NULL, date_debut DATE NOT NULL, date_fin DATE NOT NULL, active TINYINT(1) NOT NULL, INDEX id (id), UNIQUE INDEX nom (nom), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
CREATE TABLE rtlq_auth_tokens (id INT AUTO_INCREMENT NOT NULL, user_id INT DEFAULT NULL, value VARCHAR(255) NOT NULL,
created_at DATETIME NOT NULL, INDEX IDX_56861B18A76ED395 (user_id), UNIQUE INDEX auth_tokens_value_unique (value), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
CREATE TABLE rtlq_tresorie (id_tresorie INT AUTO_INCREMENT NOT NULL, etat_id INT NOT NULL, saison_id INT NOT NULL, categorie_id INT NOT NULL, adherent_id INT DEFAULT NULL, description VARCHAR(255) NOT NULL, responsable VARCHAR(255) NOT
NULL, adherent_name VARCHAR(255) NOT NULL, date_creation DATE NOT NULL, montant DOUBLE PRECISION NOT NULL, cheque TINYINT(1) NOT NULL, numero_cheque VARCHAR(20) DEFAULT NULL, INDEX IDX_144F15F4F965414C (saison_id), INDEX IDX_144F15F4BCF5E72D (categorie_id), INDEX IDX_144F15F425F06C53 (adherent_id), INDEX FK_KFR_TRESORIE (etat_id), UNIQUE INDEX TRS_ELT
(description, date_creation, montant, adherent_name), PRIMARY KEY(id_tresorie)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
CREATE TABLE rtlq_tresorie_categorie (id INT AUTO_INCREMENT NOT NULL, value VARCHAR(100) NOT NULL, INDEX id (id), UNIQUE INDEX Value (Value), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
CREATE TABLE rtlq_tresorie_etat (id INT AUTO_INCREMENT NOT NULL, value VARCHAR(150) NOT NULL, UNIQUE INDEX value (value), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
ALTER TABLE rtlq_adherent ADD CONSTRAINT FK_E9CF7E313EAA84B1 FOREIGN KEY (cotisation_id) REFERENCES rtlq_cotisation (id);
ALTER TABLE rtlq_adherents_groupes ADD CONSTRAINT FK_E2A041687A45358C FOREIGN KEY (groupe_id) REFERENCES rtlq_groupe (id);
ALTER TABLE rtlq_adherents_groupes ADD CONSTRAINT FK_E2A0416825F06C53 FOREIGN KEY (adherent_id) REFERENCES rtlq_adherent (id);
ALTER TABLE rtlq_photo ADD CONSTRAINT FK_5E6F08461E61B789 FOREIGN KEY (repertoire_id) REFERENCES rtlq_photo_directories (id);
ALTER TABLE rtlq_cotisation ADD CONSTRAINT FK_7C469C3F965414C FOREIGN KEY (saison_id) REFERENCES rtlq_saison (id);
ALTER TABLE rtlq_cotisation ADD CONSTRAINT FK_7C469C3BCF5E72D FOREIGN KEY (categorie_id) REFERENCES rtlq_tresorie_categorie (id);
ALTER TABLE rtlq_tao ADD CONSTRAINT FK_498942B5BACD6074 FOREIGN KEY (style_id) REFERENCES rtlq_kungfu_style (id);
ALTER TABLE rtlq_tao ADD CONSTRAINT FK_498942B5B3E9C81 FOREIGN KEY (niveau_id) REFERENCES rtlq_kungfu_niveau (id);
ALTER TABLE rtlq_auth_tokens ADD CONSTRAINT FK_56861B18A76ED395 FOREIGN KEY (user_id) REFERENCES rtlq_adherent (id);
ALTER TABLE rtlq_tresorie ADD CONSTRAINT FK_144F15F4D5E86FF FOREIGN KEY (etat_id) REFERENCES rtlq_tresorie_etat (id);
ALTER TABLE rtlq_tresorie ADD CONSTRAINT FK_144F15F4F965414C FOREIGN KEY (saison_id) REFERENCES rtlq_saison (id);
ALTER TABLE rtlq_tresorie ADD CONSTRAINT FK_144F15F4BCF5E72D FOREIGN KEY (categorie_id) REFERENCES rtlq_tresorie_categorie (id);
ALTER TABLE rtlq_tresorie ADD CONSTRAINT FK_144F15F425F06C53 FOREIGN KEY (adherent_id) REFERENCES rtlq_adherent (id);
